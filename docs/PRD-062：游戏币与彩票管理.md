# PRD-062：游戏币与彩票管理（适配Trae开发）

## 1. 概述
- **目标用户**：门店运营、技术员、财务、顾客。
- **核心价值**：数字化管理游戏币和彩票的流通、库存、回收、核销，确保账实相符，防止作弊。
- **技术目标**：集成硬件设备（售币机、彩票机），实时监控币/票库存，自动同步财务，支持在线购币、彩票存兑。

## 2. 用户故事
- 作为**顾客**，我可以在小程序购买游戏币，到店后扫码取币；玩彩票机后，扫码将彩票存入会员卡。
- 作为**技术员**，我需要定期盘点币箱、彩票机库存，系统自动比对差异。

## 3. 功能列表（按优先级）

### 3.1 游戏币管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| TC01 | 在线购币 | 用户在小程序购买游戏币，生成兑换码，到店自助取币。 | 接口：`POST /api/coins/buy` | 购币成功 |
| TC02 | 币库存管理 | 实时监控售币机币箱库存，低于阈值自动预警。 | 硬件联动 | 数据准确 |
| TC03 | 币回收 | 设备回收游戏币，记录回收数量，定期结算。 | 接口：`POST /api/coins/recycle` | 记录完整 |

### 3.2 彩票管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| TC04 | 彩票存兑 | 用户扫码将彩票存入会员卡，系统累计彩票数。 | 接口：`POST /api/tickets/store` | 存入成功 |
| TC05 | 彩票兑换 | 用户用彩票兑换礼品，扣减彩票数，同步库存。 | 礼品系统联动 | 兑换准确 |
| TC06 | 彩票库存 | 管理彩票机内彩票库存，实时监控，自动补票提醒。 | 接口：`GET /api/tickets/inventory` | 库存准确 |

### 3.3 账务核对（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| TC07 | 币/票对账 | 每日自动统计销售币数、回收币数、彩票发行数、兑换数，与财务对账。 | 财务底座 | 一致率≥99.9% |

## 4. 依赖模块
- 硬件联动（PRD-005）
- 财务底座（PRD-009）
- 礼品系统（PRD-025）

---
**版本历史**：V1.0 2025-03-03