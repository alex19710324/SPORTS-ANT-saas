# PRD-032：公域投放与效果追踪（适配Trae开发）

## 1. 概述
- **目标用户**：市场投放经理、优化师、财务人员、总部运营。
- **核心价值**：实现与主流广告平台（巨量引擎、腾讯广告、快手、Google Ads、Facebook Ads）的一站式对接，支持投放计划管理、素材上传、预算控制、实时数据监控、ROI分析，提升广告投放效率和效果。
- **技术目标**：基于Spring Boot微服务架构，集成各平台Marketing API，构建统一投放管理平台，支持跨平台数据聚合、自动化调价、效果归因、与财务系统联动，投放数据回流延迟≤10分钟。

## 2. 用户故事
- 作为**投放优化师**，我想要在后台创建一条抖音信息流广告，选择人群包、上传素材、设置预算和出价，系统自动同步到巨量引擎平台。
- 作为**财务人员**，我想要实时监控各渠道广告消耗，与财务预算对比，超预算自动预警。
- 作为**总部运营**，我想要看各区域广告投放的ROI、转化成本、拉新效果，辅助决策。

## 3. 功能列表（按优先级）

### 3.1 广告平台对接（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| AD01 | 平台账号授权 | 支持巨量引擎、腾讯广告、快手、Google Ads、Facebook Ads等平台的账号授权。 | OAuth2/API Key | 授权成功率≥99% |
| AD02 | 账号管理 | 支持多账号管理，区分代理商/直客账号。 | 接口：`/api/ads/accounts` | 管理清晰 |

### 3.2 投放计划管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| AD03 | 投放计划创建 | 创建广告计划，选择平台、目标（拉新/促活/转化）、预算、出价方式。 | 接口：`POST /api/ads/campaigns` | 创建成功 |
| AD04 | 人群包管理 | 支持上传自定义人群包（手机号、设备号），或使用平台自带标签，支持人群包组合。 | 数据中台人群服务 | 人群包生效 |
| AD05 | 素材关联 | 从素材库选择图片/视频，系统自动适配各平台尺寸要求。 | 素材处理 | 自动适配 |
| AD06 | 预算控制 | 设置日预算/总预算，消耗达阈值自动停止投放。 | 规则引擎 | 控制准确 |

### 3.3 投放监控与优化（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| AD07 | 实时数据看板 | 展示各计划消耗、曝光、点击、转化、成本、ROI，支持多维度下钻。 | 数据中台 | 数据延迟≤10分钟 |
| AD08 | 自动化调价 | 根据转化成本自动调整出价（规则或AI模型），提升ROI。 | 规则/强化学习 | 调价效果可量化 |
| AD09 | 异常告警 | 当消耗突增、转化率骤降时自动告警给投放经理。 | 规则引擎 | 告警及时 |

### 3.4 效果归因与ROI分析（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| AD10 | 归因模型 | 支持多种归因模型（末次点击、线性、时间衰减），追踪用户转化来源。 | 归因引擎 | 归因准确 |
| AD11 | LTV分析 | 关联用户后续消费，计算广告带来的用户生命周期价值（LTV）。 | 数据中台 | 分析准确 |
| AD12 | 投放报表 | 自动生成日报/周报/月报，包含各渠道成本、转化、ROI。 | 报表引擎 | 导出≤30秒 |

## 4. 技术架构
- **前端**：Vue3 + Element Plus。
- **后端**：Spring Boot + 广告投放微服务。
- **数据**：MySQL（计划）、ClickHouse（实时数据）、Redis（缓存）。
- **底座依赖**：
  - 数据中台：人群包、归因。
  - 财务底座：预算联动。
  - 自媒体模块：素材库。

## 5. 接口设计示例
- **创建广告计划**：
  - `POST /api/ads/campaigns`
  - 请求：
    ```json
    {
      "name": "五一引流",
      "platform": "douyin",
      "objective": "CONVERSIONS",
      "budget": 10000,
      "bid": 10.5,
      "targeting": { "age": ["18-30"], "region": ["上海"] },
      "creativeIds": [2001, 2002]
    }
    ```

## 6. 验收标准
- 广告计划同步到平台≤10秒。
- 实时数据看板刷新及时。
- 归因准确率≥90%。

## 7. 依赖模块
- **数据中台**：人群、归因。
- **财务底座**：预算。
- **自媒体模块**：素材库。

---
**版本历史**：
| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2025-03-03 | 初始版本 | 产品团队 |