# PRD-037：活动报名与签到管理（适配Trae开发）

## 1. 概述
- **目标用户**：门店活动策划专员、运行专员、顾客、店长、总部运营。
- **核心价值**：实现线上线下活动的统一报名、签到、核销、数据统计全流程数字化，提升活动组织效率，增强顾客参与体验，为活动效果评估提供精准数据支撑。
- **技术目标**：基于Spring Boot + Vue3微服务架构，集成营销活动引擎、票务系统、通讯社媒底座（通知）、数据中台（分析），支持多种报名方式、签到核验、实时数据看板，活动参与率提升20%。

## 2. 用户故事
- 作为**顾客**，我在小程序看到门店举办“周末亲子运动会”活动，点击报名，选择参与人数，提交后收到电子入场券二维码。活动当天到场扫码签到，获得积分奖励。
- 作为**运行专员**，我在活动开始前查看报名人数，准备物料；活动进行中，通过签到后台核销用户二维码，统计实际到场人数。
- 作为**活动策划**，活动结束后，我想要查看报名转化率、到场率、用户画像，评估活动效果。
- 作为**店长**，我想要查看本店各类型活动的参与趋势，优化活动排期。

## 3. 功能列表（按优先级）

### 3.1 活动发布与报名（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV01 | 活动创建 | 创建活动基本信息（名称、时间、地点、类型、封面、详情），支持设置活动标签（亲子、竞技、节日等）。 | 接口：`POST /api/events` | 创建成功 |
| EV02 | 报名规则配置 | 配置报名起止时间、人数上限（总/每日）、报名费用（免费/积分/现金）、年龄限制、是否需审核。 | 规则引擎 | 规则生效 |
| EV03 | 多渠道报名 | 顾客可通过小程序、H5、扫码等方式报名，报名后生成唯一二维码/核销码。 | 票务服务 | 报名成功率≥99% |
| EV04 | 报名审核 | 对于需审核的活动，运营人员在后台审核报名，通过后通知用户。 | 工作流 | 审核流程完整 |

### 3.2 签到核销（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV05 | 签到方式 | 支持扫码枪核销二维码、手动输入手机号核销、人脸识别签到（可选）。 | 接口：`POST /api/events/sign` | 核销响应≤1秒 |
| EV06 | 多次签到 | 支持活动设置多次签到（如上午签到、下午签到），记录签到时间。 | 状态机 | 签到准确 |
| EV07 | 补签功能 | 运营人员可在后台为忘记带码的顾客手动补签，需填写原因。 | 后台操作 | 补签记录 |
| EV08 | 签到统计 | 实时显示已签到人数、剩余名额、签到率。 | WebSocket推送 | 刷新≤5秒 |

### 3.3 活动互动与提醒（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV09 | 自动提醒 | 活动开始前24小时、1小时自动推送提醒给已报名用户（小程序/短信）。 | 通讯社媒底座 | 送达率≥99% |
| EV10 | 活动现场互动 | 支持活动中的抽奖、投票、问卷，与签到系统联动。 | 互动引擎 | 实时参与 |
| EV11 | 活动评价 | 活动结束后，自动推送评价问卷，收集用户反馈。 | 问卷引擎 | 回收率≥30% |

### 3.4 数据统计与分析（P2）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV12 | 活动看板 | 展示活动报名趋势、到场率、年龄/性别分布、新老会员占比。 | 数据中台 | 图表清晰 |
| EV13 | 活动ROI分析 | 关联活动带来的后续消费，计算活动投资回报率。 | 归因引擎 | 分析准确 |
| EV14 | 导出报表 | 支持导出报名名单（含联系方式）、签到记录，用于后续营销。 | 导出服务 | 导出≤10秒 |

## 4. 技术架构
- **前端**：小程序（用户端）、Vue3后台（管理端）。
- **后端**：Spring Boot + 活动微服务。
- **数据**：MySQL（活动、报名）、Redis（实时计数）、ClickHouse（分析）。
- **底座依赖**：
  - 通讯社媒底座：提醒推送。
  - 数据中台：分析。
  - 会员系统：用户画像。

## 5. 接口设计示例
- **用户报名活动**：
  - `POST /api/events/1001/register`
  - 请求：
    ```json
    {
      "userId": 12345,
      "participants": 2,
      "contactPhone": "13800138000"
    }
    ```
  - 响应：`{ "code": 200, "qrCode": "url_to_qrcode" }`

## 6. 验收标准
- 报名流程顺畅，核销响应≤1秒。
- 自动提醒准时送达。
- 活动数据看板实时准确。
- 导出功能可用。

## 7. 依赖模块
- **通讯社媒底座**：提醒。
- **数据中台**：分析。
- **会员系统**：用户画像。

---
**版本历史**：
| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2025-03-03 | 初始版本 | 产品团队 |