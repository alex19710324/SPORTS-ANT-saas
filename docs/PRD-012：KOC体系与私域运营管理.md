# PRD-012：KOC体系与私域运营管理（适配Trae开发）

## 1. 概述
- **目标用户**：总部私域运营经理、门店市场专员、KOC本人、店长、HR（绩效核算）。
- **核心价值**：构建完整的私域KOC成长体系，实现KOC的智能识别、分级管理、任务派发、素材支持、收益结算、效果分析，形成“招募-培育-激励-裂变”的闭环，提升私域运营效率，KOC带动复购率提升30%+。
- **技术目标**：基于Spring Boot + Vue3微服务架构，深度集成AI底座（潜力预测、内容生成）、通讯社媒底座（分发、追踪）、财务底座（提成结算），实现数据实时同步，任务自动化，收益T+0.5结算。

## 2. 用户故事
- 作为**总部私域运营经理**，我想要通过AI模型自动识别高潜力KOC候选，定向发送招募通知，配置KOC等级权益，监控整体KOC运营效果。
- 作为**门店市场专员**，我想要为KOC创建个性化任务（如新品推广、社群打卡），分发AI生成的素材包，并追踪任务完成情况。
- 作为**KOC**，我想要在小程序专属工作台查看我的等级权益、推广任务、素材库，一键分享到多个社交平台，并实时查看收益和提现。
- 作为**店长**，我想要查看本店KOC的推广贡献、核销数据，及时调整激励策略。
- 作为**HR**，我想要将KOC提成自动纳入薪酬核算。

## 3. 功能列表（按优先级）

### 3.1 KOC智能识别与招募（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| K01 | 潜力KOC识别 | AI底座基于会员行为（消费频次、社交互动、分享记录、内容创作）每月输出高潜力KOC候选名单，准确率≥90%。 | 接口：`GET /api/koc/potential`，调用AI底座模型。 | 名单推送准时 |
| K02 | 招募通知 | 系统自动向候选会员推送招募通知（小程序消息/短信/企微），含权益介绍、入驻指引。 | 通讯社媒底座推送 | 送达率≥99% |
| K03 | 入驻申请与审核 | 会员提交申请（可补充社交账号信息），门店/总部审核通过后正式成为KOC。 | 工作流引擎 | 审核流程完整 |
| K04 | 协议签署 | KOC首次入驻需在线签署《KOC推广协议》（含佣金规则、内容规范），系统存证。 | 电子签章集成 | 协议可追溯 |

### 3.2 KOC等级与权益（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| K05 | 等级配置 | 总部可配置KOC等级（青铜/白银/黄金），设定晋升条件（推广核销数、引流人数、复购率等）。 | 规则引擎 | 条件可配置 |
| K06 | 权益管理 | 各等级匹配差异化权益（分销提成加成、NFT空投、专属素材、新品投票权等），权益与会员体系联动。 | 接口：`/api/koc/benefits` | 权益实时生效 |
| K07 | 自动晋升/降级 | 系统每月根据KOC推广数据自动计算等级变更，推送通知。 | 定时任务 + 规则 | 准确无误 |

### 3.3 任务与素材管理（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| K08 | 任务配置 | 运营可创建推广任务（如新品盲盒推广、社群招募），设置任务目标、奖励、截止时间，选择目标KOC等级/标签。 | 接口：`POST /api/koc/tasks` | 任务准时下发 |
| K09 | AI素材生成 | 输入任务参数，AI自动生成多版本素材包（图文、短视频、多语言文案），自动适配各平台尺寸。 | AI内容生成引擎 | 生成时间≤5秒 |
| K10 | 素材库 | KOC在小程序端查看专属任务及素材包，支持一键下载/分享至微信、抖音、小红书、Facebook等。 | 通讯社媒底座分发 | 分享成功率≥99% |
| K11 | 任务进度追踪 | KOC实时查看任务完成进度（如已引流人数、待核销数）。 | 接口：`GET /api/koc/tasks/progress` | 数据实时 |

### 3.4 推广追踪与结算（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| K12 | 追踪链接生成 | 每个KOC的分享链接自动携带唯一参数（koc_id+task_id），确保归因准确。 | 短链服务 | 归因准确率≥99% |
| K13 | 推广数据看板 | KOC可查看各渠道引流人数、核销数、预估收益、佣金明细。 | 接口：`GET /api/koc/stats` | 数据延迟≤5分钟 |
| K14 | 自动提成结算 | 核销完成后实时计算提成（T+0.5），财务底座生成付款单，支持KOC提现（微信/支付宝/银行卡）。 | 财务底座 + 支付网关 | 结算准确率100% |
| K15 | 等级与收益联动 | 提成比例根据KOC等级自动应用（如黄金KOC提成+5%）。 | 规则引擎 | 比例正确 |

### 3.5 社群运营辅助（P2）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| K16 | 社群管理 | KOC可建立/管理自己的社群（微信群/Discord），系统提供入群二维码、社群活动模板。 | 通讯社媒底座 | 社群数据同步 |
| K17 | 社群打卡任务 | KOC可发起社群打卡活动，系统自动统计参与人数，发放积分奖励。 | 活动引擎 | 数据准确 |
| K18 | KOC排行榜 | 按区域/全国展示KOC推广排行榜，激励竞争。 | 接口：`GET /api/koc/rank` | 实时更新 |

### 3.6 管理后台功能（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| K19 | KOC总览看板 | 展示KOC总数、活跃数、贡献营收、平均ROI，趋势图。 | 数据中台 | 数据准确 |
| K20 | KOC明细列表 | 查看所有KOC信息（等级、推广数据、收益），支持筛选、导出。 | 接口：`GET /api/koc/list` | 导出≤10秒 |
| K21 | 任务效果分析 | 分析各任务完成率、投入产出比，优化任务配置。 | 接口：`GET /api/koc/tasks/analysis` | 报表可视化 |
| K22 | 风险控制 | 监控异常推广（如刷单、虚假流量），自动冻结并人工审核。 | 风控引擎 | 异常识别准确 |

## 4. 技术架构
- **前端**：KOC端嵌入小程序（Vue3），管理后台Vue3 + Element Plus。
- **后端**：Spring Boot微服务，独立KOC模块。
- **数据**：MySQL（KOC信息、任务、收益）、Redis（实时数据）、ClickHouse（统计分析）。
- **底座依赖**：
  - AI底座：潜力预测、素材生成。
  - 通讯社媒底座：消息通知、内容分发、追踪。
  - 财务底座：提成结算、付款单生成。
  - 会员系统：获取会员基础信息。
  - 订单系统：获取核销数据。

## 5. 接口设计示例
- **获取KOC推广数据**：
  - `GET /api/koc/stats?kocId=1001&startDate=2025-03-01&endDate=2025-03-07`
  - 响应：
    ```json
    {
      "totalClicks": 1234,
      "totalRedemptions": 56,
      "estimatedRevenue": 1120.50,
      "commission": 56.02,
      "tasks": [
        { "taskId": 2001, "clicks": 500, "redemptions": 20 }
      ]
    }
    ```

- **创建KOC任务**：
  - `POST /api/koc/tasks`
  - 请求：
    ```json
    {
      "title": "春季新品盲盒推广",
      "targetKocLevels": ["青铜", "白银", "黄金"],
      "rewardType": "commission",
      "commissionRate": 0.05,
      "startDate": "2025-03-10",
      "endDate": "2025-03-20",
      "materials": ["素材ID1", "素材ID2"]
    }
    ```

## 6. 验收标准
- KOC潜力预测准确率≥90%。
- 提成计算准确率100%，结算T+0.5。
- 分享追踪归因准确率≥99%。
- KOC端数据看板刷新延迟≤5分钟。
- 后台任务创建与分发成功率≥99%。

## 7. 依赖模块
- **AI底座**：潜力预测、素材生成。
- **通讯社媒底座**：推送、分发、追踪。
- **财务底座**：提成结算。
- **会员系统**：基础信息。
- **订单系统**：核销数据。

---
**版本历史**：
| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2025-03-02 | 初始版本，基于总体规划文档 | 产品团队 |