# PRD-074：短信/邮件网关管理（适配Trae开发）

## 1. 概述
- **目标用户**：系统管理员、运营人员（需发送通知）。
- **核心价值**：统一管理多个短信/邮件服务商（阿里云、腾讯云、SendCloud、AWS SES），提供智能路由、模板管理、发送记录、成本统计，确保消息送达率。
- **技术目标**：基于Spring Boot，集成各服务商SDK，支持通道切换、失败重试、送达率统计。

## 2. 用户故事
- 作为**系统管理员**，当某短信通道不可用时，系统自动切换到备用通道，并发送告警。
- 作为**运营**，我需要查看本月短信发送量、费用，分析各通道成功率。

## 3. 功能列表（按优先级）

### 3.1 通道管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| GW01 | 通道配置 | 配置多个短信/邮件服务商参数，设置优先级、权重。 | 接口：`/api/gateway/channels` | 配置生效 |
| GW02 | 通道监控 | 实时监控各通道健康状态、响应时间，异常自动切换。 | 健康检查 | 切换≤30秒 |

### 3.2 模板管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| GW03 | 模板审核 | 对接短信平台模板审核状态，支持提交审核。 | 接口：`POST /api/gateway/template` | 模板可查 |

### 3.3 发送与统计（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| GW04 | 智能路由 | 根据通道成本、成功率、优先级自动选择最优通道发送。 | 规则引擎 | 路由合理 |
| GW05 | 发送记录 | 记录每次发送的通道、状态、回执信息。 | Elasticsearch | 可追溯 |
| GW06 | 成本统计 | 按月统计各通道发送量、费用，生成报表。 | 财务底座 | 数据准确 |

## 4. 依赖模块
- 消息通知中心（PRD-043）
- 财务底座（PRD-009）

---
**版本历史**：V1.0 2025-03-03