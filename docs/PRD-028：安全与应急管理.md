# PRD-028：安全与应急管理（适配Trae开发）

## 1. 概述
- **目标用户**：安监专员、店长、值班经理、全体员工（需要参与应急响应）。
- **核心价值**：构建全面的安全管理体系，涵盖安全巡检、应急预案管理、突发事件处理、安全培训、事故报告与统计，保障门店人员与财产安全，确保合规经营。
- **技术目标**：基于Spring Boot + Vue3微服务架构，集成工作流引擎、通讯社媒底座（预警推送）、AI底座（风险预测），实现安全管理的数字化、流程化、可追溯。

## 2. 用户故事
- 作为**安监专员**，我想要制定安全巡检计划，检查消防设施、疏散通道、电气线路，发现隐患及时上报并整改。
- 作为**店长**，我想要在突发事件发生时（如火灾、停电、斗殴），系统自动推送应急预案给相关人员，指导处置。
- 作为**值班经理**，我需要记录事故处理过程，上传照片，生成事故报告，并跟进保险理赔。
- 作为**总部安全负责人**，我想要查看各门店安全事故统计、隐患整改率，分析安全趋势。
- 作为**普通员工**，我需要接受安全培训，参与应急演练，并在紧急情况下按照指引行动。

## 3. 功能列表（按优先级）

### 3.1 安全巡检管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| SE01 | 巡检项目配置 | 支持配置巡检项目（如灭火器压力、消防栓完好、疏散通道畅通、应急照明测试等），设定检查标准和频次。 | 接口：`/api/safety/inspection-items` | 配置灵活 |
| SE02 | 巡检计划制定 | 按区域/设备制定巡检计划（日/周/月），指定责任人，自动生成巡检任务。 | 定时任务 | 计划自动下发 |
| SE03 | 移动端巡检 | 安监专员在手机上查看当日巡检任务，逐项检查并拍照上传，填写检查结果。 | 接口：`POST /api/safety/inspection/execute` | 记录完整 |
| SE04 | 隐患上报 | 巡检发现隐患时，可一键上报生成整改工单，指定整改人和期限。 | 工单系统联动 | 工单闭环 |
| SE05 | 整改追踪 | 跟踪隐患整改状态，超期自动提醒整改人及上级。 | 定时提醒 | 整改率≥95% |

### 3.2 应急预案管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| SE06 | 应急预案库 | 维护各类应急预案（火灾、停电、地震、暴力事件、医疗急救等），包含处置步骤、责任人、联系方式、疏散路线图。 | 内容管理 | 预案可查 |
| SE07 | 预案版本管理 | 预案更新后自动替换旧版，历史版本可追溯。 | 版本控制 | 版本清晰 |
| SE08 | 预案推送 | 突发事件发生时，相关人员可一键启动预案，系统自动推送处置指引至对应人员工作台/企微/短信。 | 通讯社媒底座 | 推送延迟≤3秒 |
| SE09 | 应急物资管理 | 管理应急物资（灭火器、急救箱、应急灯等）的库存、有效期，到期提醒。 | 库存管理 | 预警及时 |

### 3.3 突发事件处理（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| SE10 | 事件上报 | 员工发现突发事件可一键上报，填写事件类型、地点、描述、上传照片/视频。 | 接口：`POST /api/safety/incident/report` | 上报及时 |
| SE11 | 事件响应 | 系统自动通知应急小组负责人，启动对应预案，记录响应时间。 | 工作流 | 响应记录 |
| SE12 | 处置过程记录 | 现场负责人可实时记录处置过程（文字、照片），便于事后复盘。 | 接口：`POST /api/safety/incident/log` | 记录完整 |
| SE13 | 事故报告生成 | 事件结束后，系统自动生成事故报告（含时间、地点、原因、处理结果、损失、保险跟进），支持导出PDF。 | 报告引擎 | 报告准确 |

### 3.4 安全培训与演练（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| SE14 | 安全培训课程 | 创建安全培训课程（消防知识、急救技能、应急演练流程），上传课件，指定参训人员。 | 培训模块联动 | 课程发布 |
| SE15 | 培训记录 | 记录员工培训完成情况，支持在线考试。 | 考试引擎 | 记录完整 |
| SE16 | 演练计划 | 制定应急演练计划（时间、类型、参与人员），演练后评估效果。 | 接口：`POST /api/safety/drill` | 计划执行 |
| SE17 | 演练评估 | 填写演练评估报告，记录存在问题及改进措施。 | 表单引擎 | 评估可查 |

### 3.5 事故统计与分析（P2）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| SE18 | 事故统计看板 | 按门店、时间统计事故数量、类型分布、损失金额、处理时效。 | 数据中台 | 图表清晰 |
| SE19 | 隐患趋势分析 | 分析隐患类别、多发区域，提前预警高风险区域。 | AI底座 | 预警准确 |
| SE20 | 安全评分 | 根据巡检完成率、隐患整改率、事故发生率等自动计算门店安全评分。 | 规则引擎 | 评分客观 |

## 4. 技术架构
- **前端**：Vue3 + Element Plus（后台），嵌入员工工作台（移动端）。
- **后端**：Spring Boot + 安全微服务。
- **数据**：MySQL（巡检、事件、预案）、Redis（实时状态）、Elasticsearch（日志）。
- **底座依赖**：
  - 通讯社媒底座：通知推送。
  - 工单系统：隐患整改。
  - 培训模块：安全培训。
  - AI底座：风险分析。

## 5. 接口设计示例
- **上报突发事件**：
  - `POST /api/safety/incident/report`
  - 请求：
    ```json
    {
      "storeId": 1001,
      "type": "fire",
      "location": "二楼电玩区",
      "description": "设备冒烟",
      "reporterId": 123,
      "photos": ["url1", "url2"]
    }
    ```
  - 响应：`{ "incidentId": 5001, "status": "processing" }`

## 6. 验收标准
- 巡检任务准时下发，记录完整。
- 应急预案推送延迟≤3秒。
- 事故报告生成时间≤1分钟。
- 安全评分客观合理。

## 7. 依赖模块
- **通讯社媒底座**：通知。
- **工单系统**：隐患整改。
- **培训模块**：安全培训。
- **AI底座**：风险分析。

---
**版本历史**：
| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2025-03-03 | 初始版本，整合安全与应急管理 | 产品团队 |