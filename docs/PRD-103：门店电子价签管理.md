# PRD-103：门店电子价签管理（适配Trae开发）

## 1. 概述
- **目标用户**：商品管理员、运营、店长。
- **核心价值**：对接电子价签硬件（如汉朔、云里物里），实现商品价格、信息的远程统一更新，避免人工换签错误，提升运营效率。
- **技术目标**：基于蓝牙/NB-IoT通信，集成价签管理平台，支持批量修改、定时刷新、与POS系统价格同步。

## 2. 用户故事
- 作为**商品管理员**，我在后台修改了某盲盒的价格，系统自动将新价格推送到对应货架的电子价签上，实时更新。
- 作为**店长**，我要进行限时促销，提前设置好促销时段，系统在促销开始时自动改价。

## 3. 功能列表（按优先级）

### 3.1 价签硬件管理（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| ES01 | 价签注册 | 录入电子价签ID、MAC、所在货架、绑定商品。 | 接口：`/api/esl/devices` | 注册成功 |
| ES02 | 状态监控 | 实时监控价签电量、在线状态、通信质量，低电量告警。 | 规则引擎 | 告警及时 |

### 3.2 价格同步（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| ES03 | 价格变更触发 | 监听商品价格变更事件，自动生成价签更新任务。 | 事件驱动 | 自动触发 |
| ES04 | 价签更新 | 通过网关向指定价签发送新价格，支持单个/批量更新。 | 接口：`POST /api/esl/update` | 成功率≥99% |
| ES05 | 更新结果 | 记录每次更新结果（成功/失败），失败自动重试。 | 日志 | 可追溯 |

### 3.3 促销计划（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| ES06 | 促销时段 | 设置促销开始/结束时间，系统自动在时段内修改价签价格。 | 定时任务 | 准时 |

## 4. 依赖模块
- 商品系统（PRD-013）
- 硬件联动网关（PRD-005）

---
**版本历史**：V1.0 2025-03-03