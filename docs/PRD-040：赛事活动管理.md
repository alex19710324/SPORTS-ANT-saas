# PRD-040：赛事活动管理（适配Trae开发）

## 1. 概述
- **目标用户**：门店运行专员、赛事策划、参赛玩家、店长、总部运营。
- **核心价值**：打造沉浸式数字运动赛事体验，支持赛事发布、在线报名、赛程编排、比分直播、排行榜生成、奖励发放，提升用户粘性与门店热度，形成周期性竞技IP。
- **技术目标**：基于Spring Boot + Vue3微服务架构，集成活动引擎、实时通信（WebSocket）、AI底座（赛程优化）、数据中台，支持多类型赛事（个人赛、团体赛、淘汰赛、积分赛），赛事参与率提升30%。

## 2. 用户故事
- 作为**运行专员**，我想要发布一场“周末VR竞速赛”，设置报名时间、比赛规则、奖品，系统自动生成赛程表，并在小程序开放报名。
- 作为**参赛玩家**，我在小程序看到赛事预告，点击报名，比赛当天扫码签到，实时看到自己的排名和比分。
- 作为**店长**，赛事结束后，我想要查看参与人数、奖品消耗、社交媒体曝光，评估赛事效果。

## 3. 功能列表（按优先级）

### 3.1 赛事配置与发布（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV01 | 赛事类型配置 | 支持个人赛、团体赛、淘汰赛、积分循环赛等多种赛制。 | 规则引擎 | 类型可扩展 |
| EV02 | 赛事基本信息 | 填写赛事名称、时间、地点、项目（如VR、蹦床、投篮）、人数上限、报名费。 | 接口：`POST /api/events` | 创建成功 |
| EV03 | 奖励配置 | 设置奖品（积分、优惠券、盲盒、NFT、实物），支持名次奖励。 | 权益系统 | 奖励关联准确 |
| EV04 | 规则说明 | 上传赛事规则文档/视频，支持多语言。 | 内容管理 | 展示清晰 |

### 3.2 报名与签到（P0）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV05 | 在线报名 | 玩家在小程序报名，可填写队友（团体赛），支付报名费（如有），生成参赛码。 | 接口：`POST /api/events/{id}/register` | 报名成功率≥99% |
| EV06 | 报名审核 | 需审核的赛事，运营后台审核通过后发送通知。 | 工作流 | 审核闭环 |
| EV07 | 现场签到 | 比赛当天，玩家出示参赛码扫码签到，自动分组。 | 接口：`POST /api/events/sign` | 签到响应≤1秒 |

### 3.3 赛程编排与比分（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV08 | 自动赛程生成 | 根据报名人数、赛制，自动生成对阵表/赛程时间表。 | 算法引擎 | 生成合理 |
| EV09 | 比分录入 | 裁判/设备自动上传比分，系统实时更新。 | 接口：`POST /api/events/scores` | 录入准确 |
| EV10 | 实时排行榜 | 展示当前排名、晋级情况，支持大屏投影。 | WebSocket推送 | 刷新≤2秒 |
| EV11 | 赛事直播 | 集成直播功能（如推流至抖音/视频号），或内嵌直播流。 | 第三方直播SDK | 直播流畅 |

### 3.4 奖励发放（P1）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV12 | 自动发奖 | 比赛结束后，系统根据名次自动发放奖励至玩家账户。 | 权益系统 | 发奖准确 |
| EV13 | 奖品核销 | 实体奖品可生成核销码，玩家凭码兑换。 | 券码服务 | 核销闭环 |

### 3.5 赛事数据与分析（P2）

| ID | 功能名称 | 描述 | 技术实现要点 | 验收标准 |
|----|----------|------|--------------|----------|
| EV14 | 赛事看板 | 统计报名人数、到场率、用户画像、社交媒体提及。 | 数据中台 | 图表清晰 |
| EV15 | 赛事ROI | 关联赛事带来的会员增长、后续消费，计算ROI。 | 归因引擎 | 分析准确 |

## 4. 技术架构
- **前端**：小程序（用户端）、Vue3后台（管理端）。
- **后端**：Spring Boot + 赛事微服务 + WebSocket。
- **数据**：MySQL（赛事、报名）、Redis（实时排行）、Elasticsearch（日志）。
- **底座依赖**：
  - 权益系统：奖励发放。
  - 数据中台：分析。
  - 通讯社媒底座：通知、直播。

## 5. 接口设计示例
- **报名赛事**：
  - `POST /api/events/1001/register`
  - 请求：
    ```json
    {
      "userId": 12345,
      "team": ["user1", "user2"] // 团体赛
    }
    ```

## 6. 验收标准
- 赛程自动生成准确。
- 比分实时刷新。
- 奖励自动发放无误。
- 直播流畅不卡顿。

## 7. 依赖模块
- **权益系统**：奖励。
- **数据中台**：分析。
- **通讯社媒底座**：通知。

---
**版本历史**：
| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2025-03-03 | 初始版本 | 产品团队 |